
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AYM Propiedades — Compra, Venta y Arriendo</title>
  <meta name="description" content="Agentes inmobiliarios especializados en la V región de Chile y alrededores.">
  <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
  <div id="header"></div>
  <main class="container">
    <section class="hero">
      <div style="flex:2">
        <h1>Tu próxima propiedad en la V Región</h1>
        <p class="small">Agentes inmobiliarios especializados en la gestión de compra, venta y arriendo de propiedades en la V región de Chile y alrededores.</p>
        <div class="badges">
          <span class="tag">Compra</span>
          <span class="tag">Venta</span>
          <span class="tag">Arriendo</span>
        </div>
      </div>
      <div style="flex:1">
        <div class="section">
          <div style="font-weight:700;margin-bottom:8px">Contacto directo</div>
          <div class="small">Fanny Matus</div>
          <div class="small"><a href="mailto:alarconymatus@gmail.com">alarconymatus@gmail.com</a></div>
          <div class="small">+56 9 9000 3574 • +56 9 9682 5523</div>
        </div>
      </div>
    </section>

    <section id="propiedades" class="section">
      <div class="row" style="align-items:center">
        <h2 style="margin:0;flex:1">Propiedades</h2>
        <div class="controls">
          <select id="filter-operation" class="input">
            <option value="">Operación (todas)</option>
            <option>Venta</option>
            <option>Arriendo</option>
          </select>
          <input id="filter-search" class="input" placeholder="Buscar por título/comuna/tipo">
        </div>
      </div>
      <div id="grid" class="grid"></div>
    </section>

    <section id="contacto" class="section">
      <h2>¿Necesitas tasar o publicar?</h2>
      <p>Escríbenos y te asesoramos: <a href="mailto:alarconymatus@gmail.com">alarconymatus@gmail.com</a></p>
      <a class="button" href="mailto:alarconymatus@gmail.com">Contacto por correo</a>
    </section>
  </main>
  <div id="footer"></div>

  <script src="./assets/script.js"></script>
  <script>
    document.getElementById('header').innerHTML = AYMPages.renderHeader();
    document.getElementById('footer').innerHTML = AYMPages.renderFooter();
    const grid = document.getElementById('grid');
    const filterOperation = document.getElementById('filter-operation');
    const filterSearch = document.getElementById('filter-search');

    let allProps = [];
    function applyFilters(){
      const op = filterOperation.value.toLowerCase();
      const q = filterSearch.value.toLowerCase().trim();
      grid.innerHTML = allProps
        .filter(p => !op || (p.operation||'').toLowerCase()===op)
        .filter(p => {
          if(!q) return true;
          const hay = (p.title+' '+(p.commune||'')+' '+(p.type||'')+' '+(p.summary||'')).toLowerCase();
          return hay.includes(q);
        })
        .map(AYMPages.cardHtml)
        .join('');
    }

    AYMPages.loadProps().then(props => {
      allProps = props;
      applyFilters();
    });

    filterOperation.addEventListener('change', applyFilters);
    filterSearch.addEventListener('input', applyFilters);
  </script>
</body>
</html>
