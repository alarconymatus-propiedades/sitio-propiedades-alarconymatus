<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AYM Propiedades – Venta y Arriendo</title>

  <!-- SEO / Social -->
  <meta name="description" content="AYM Propiedades: venta y arriendo en la Región de Valparaíso. Publica tu propiedad con nosotros." />
  <meta property="og:title" content="AYM Propiedades – Venta y Arriendo" />
  <meta property="og:description" content="Publica y encuentra propiedades: foto de portada, galería y contacto directo." />
  <meta property="og:type" content="website" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {50:"#FFF4E6",100:"#FDE9CC",200:"#F7D7A3",300:"#F4C06A",400:"#E89D38",500:"#D18A2A",600:"#B8721F",700:"#8F5516",800:"#6B3E12",900:"#3B2109"}
          }
        }
      }
    }
  </script>

  <!-- React 18 + ReactDOM + Babel (para JSX simple) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <link rel="icon" type="image/png" href="assets/aym-logo.png" />
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>

  <script type="text/babel">
    // ====== CONTACTO GLOBAL ======
    const CONTACT = {
      email: "alarconymatus@gmail.com",
      whatsappMain: "+56990003574",
      whatsappAlt: "+56996825523",
      fb: "https://www.facebook.com/alarconymatuspropiedades", // puedes ajustar
      ig: "https://instagram.com/alarconymatus.propiedades"
    };

    // ====== HELPERS ======
    const clp = (n) => new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(n);
    const Badge = ({children}) => <span className="inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-medium text-gray-700 border-gray-200 bg-gray-50">{children}</span>;

    // ====== TARJETA ======
    const Card = ({p, onOpen}) => (
      <div className="group rounded-2xl border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition">
        <div className="relative aspect-[4/3] overflow-hidden">
          <img src={p.portada} alt={p.titulo} className="h-full w-full object-cover group-hover:scale-105 transition" />
          {p.destacado && <div className="absolute top-3 left-3 bg-brand-700/90 text-white text-xs px-2 py-1 rounded-full">Destacado</div>}
        </div>
        <div className="p-4 space-y-3">
          <div className="flex items-start justify-between gap-3">
            <h3 className="font-semibold leading-snug">{p.titulo}</h3>
            <span className="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-brand-50 text-brand-800 border border-brand-200">
              {p.operacion === "venta" ? "Venta" : "Arriendo"}
            </span>
          </div>
          <div className="text-lg font-bold text-brand-700">{clp(p.precio)}</div>
          <p className="text-sm text-gray-600">{p.comuna}, {p.region}</p>
          <div className="flex flex-wrap gap-2">
            {p.dormitorios>0 && <Badge>{p.dormitorios}D</Badge>}
            {p.banos>0 && <Badge>{p.banos}B</Badge>}
            {p.construidos_m2>0 && <Badge>{p.construidos_m2} m² const.</Badge>}
            {p.terreno_m2>0 && <Badge>{p.terreno_m2} m² terr.</Badge>}
          </div>
          <div className="pt-2 flex gap-2">
            <a
              href={`https://wa.me/${CONTACT.whatsappMain.replace(/[^\\d]/g,"")}?text=${encodeURIComponent(`Hola, me interesa la propiedad ${p.id} (${p.titulo}). ¿Sigue disponible?`)}`}
              target="_blank" rel="noreferrer"
              className="rounded-xl border border-brand-300 text-brand-800 px-3 py-2 text-sm hover:bg-brand-50">WhatsApp</a>
            <button onClick={()=>onOpen(p)} className="rounded-xl bg-brand-600 text-white px-3 py-2 text-sm hover:bg-brand-700">Ver ficha</button>
          </div>
        </div>
      </div>
    );

    // ====== FICHA (Drawer) ======
    const Drawer = ({open, onClose, p}) => {
      if(!open || !p) return null;
      const fotos = [p.portada, ...(p.galeria||[])];
      return (
        <div className="fixed inset-0 z-50">
          <div className="absolute inset-0 bg-black/40" onClick={onClose}/>
          <div className="absolute right-0 top-0 h-full w-full max-w-2xl bg-white shadow-xl flex flex-col">
            <div className="p-4 border-b flex items-center justify-between">
              <h3 className="font-semibold">{p.titulo} <span className="text-gray-400">• {p.id}</span></h3>
              <button onClick={onClose} className="rounded-lg border px-3 py-1 text-sm">Cerrar</button>
            </div>
            <div className="p-4 overflow-y-auto space-y-6">
              <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                {fotos.map((src,i)=>(<img key={i} src={src} alt={`${p.titulo} ${i+1}`} className="w-full h-48 object-cover rounded-xl" />))}
              </div>
              <div className="space-y-2">
                <div className="text-2xl font-bold text-brand-700">{clp(p.precio)} {p.operacion==="venta"?"• Venta":"• Arriendo"}</div>
                <div className="text-gray-700">{p.comuna}, {p.region}</div>
                <p className="text-gray-700 leading-relaxed">{p.descripcion}</p>
                <div className="flex flex-wrap gap-2 pt-1">
                  {p.dormitorios>0 && <Badge>{p.dormitorios} dormitorios</Badge>}
                  {p.banos>0 && <Badge>{p.banos} baños</Badge>}
                  {p.construidos_m2>0 && <Badge>{p.construidos_m2} m² construidos</Badge>}
                  {p.terreno_m2>0 && <Badge>{p.terreno_m2} m² terreno</Badge>}
                </div>
              </div>
              <div className="flex gap-2">
                <a href={`mailto:${CONTACT.email}?subject=${encodeURIComponent(`[Interés ${p.id}] ${p.titulo}`)}&body=${encodeURIComponent(`Hola, me interesa la propiedad ${p.id} (${p.titulo}).`)}`
                } className="rounded-xl border px-3 py-2 text-sm hover:bg-gray-50">Email</a>
                <a href={`https://wa.me/${CONTACT.whatsappMain.replace(/[^\\d]/g,"")}?text=${encodeURIComponent(`Hola, me interesa la propiedad ${p.id} (${p.titulo}). ¿Sigue disponible?`)}`}
                   target="_blank" rel="noreferrer" className="rounded-xl bg-brand-600 text-white px-3 py-2 text-sm hover:bg-brand-700">WhatsApp</a>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ====== APP ======
    function App(){
      const {useEffect, useState, useMemo} = React;
      const [all,setAll]=useState([]);
      const [loaded,setLoaded]=useState(false);
      const [q,setQ]=useState(""); const [op,setOp]=useState("todas"); const [comuna,setComuna]=useState("todas");
      const [min,setMin]=useState(""); const [max,setMax]=useState(""); const [dorms,setDorms]=useState("todas"); const [sort,setSort]=useState("recientes");
      const [open,setOpen]=useState(false); const [sel,setSel]=useState(null);

      useEffect(()=>{
        fetch("props.json?cachebust="+Date.now())
          .then(r=>r.json()).then(data=>{setAll(data); setLoaded(true);})
          .catch(()=>{setAll([]); setLoaded(true);});
      },[]);

      const filtered = useMemo(()=>{
        let data=[...all];
        if(op!=="todas") data=data.filter(p=>p.operacion===op);
        if(comuna!=="todas") data=data.filter(p=>p.comuna===comuna);
        const query=q.trim().toLowerCase();
        if(query){
          data=data.filter(p=>
            p.titulo.toLowerCase().includes(query) ||
            p.comuna.toLowerCase().includes(query) ||
            p.region.toLowerCase().includes(query) ||
            (p.descripcion||"").toLowerCase().includes(query) ||
            (p.etiquetas||[]).some(e=>e.toLowerCase().includes(query))
          );
        }
        const minV=parseInt(min||0,10), maxV=parseInt(max||0,10);
        if(min) data=data.filter(p=>p.precio>=minV);
        if(max) data=data.filter(p=>p.precio<=maxV);
        if(dorms!=="todas") data=data.filter(p=>p.dormitorios===Number(dorms));
        switch(sort){
          case "precio_asc": data.sort((a,b)=>a.precio-b.precio); break;
          case "precio_desc": data.sort((a,b)=>b.precio-a.precio); break;
          default: data.sort((a,b)=>Number(b.destacado)-Number(a.destacado) || String(b.id).localeCompare(String(a.id)));
        }
        return data;
      },[all,op,comuna,q,min,max,dorms,sort]);

      return (
        <div className="min-h-screen bg-gradient-to-b from-brand-50 to-gray-50">
          {/* NAV */}
          <nav className="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-brand-100">
            <div className="max-w-7xl mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8 h-16">
              <a href="#home" className="flex items-center gap-3">
                <img src="assets/aym-logo.png" alt="AYM" className="h-8 w-auto" />
                <span className="font-bold text-lg tracking-tight text-brand-800">AYM Propiedades</span>
              </a>
              <div className="hidden md:flex items-center gap-6 text-sm">
                <a href="#listados" className="hover:text-brand-700">Listados</a>
                <a href="#servicios" className="hover:text-brand-700">Servicios</a>
                <a href="#contacto" className="hover:text-brand-700">Contacto</a>
                <a href={`https://wa.me/${CONTACT.whatsappMain.replace(/[^\\d]/g,"")}?text=${encodeURIComponent("Hola, quiero publicar mi propiedad.")}`}
                   target="_blank" rel="noreferrer" className="rounded-xl bg-brand-600 text-white px-3 py-2 hover:bg-brand-700">WhatsApp</a>
              </div>
            </div>
          </nav>

          {/* HERO */}
          <header id="home" className="relative overflow-hidden">
            <div className="absolute inset-0 -z-10">
              <div className="h-full w-full bg-gradient-to-br from-brand-50 via-white to-brand-100"></div>
            </div>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
              <div className="grid md:grid-cols-2 gap-8 items-center">
                <div className="space-y-6">
                  <h1 className="text-3xl md:text-5xl font-extrabold leading-tight text-brand-900">
                    AYM Propiedades: <span className="text-brand-600">venta y arriendo</span> con confianza
                  </h1>
                  <p className="text-gray-700 md:text-lg">
                    Administra tus publicaciones: portada, galería y contacto directo.
                  </p>
                  <div className="flex gap-3">
                    <a href="#listados" className="rounded-xl bg-brand-600 text-white px-4 py-2 text-sm md:text-base hover:bg-brand-700">Ver propiedades</a>
                    <a href="#contacto" className="rounded-xl border border-brand-300 text-brand-800 px-4 py-2 text-sm md:text-base hover:bg-brand-50">Publica la tuya</a>
                  </div>
                </div>
                <div className="rounded-3xl overflow-hidden shadow-lg ring-1 ring-brand-200/50">
                  <img src="assets/hero-aym.jpg" alt="AYM Propiedades" className="w-full h-full object-cover" />
                </div>
              </div>
            </div>
          </header>

          {/* FILTROS + LISTADOS */}
          <section id="listados" className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <header className="mb-8">
              <h2 className="text-2xl md:text-3xl font-bold">Propiedades disponibles</h2>
              <p className="text-gray-600 mt-2">Filtra por operación, comuna, precio y dormitorios.</p>
            </header>

            {/* Filtros */}
            <div className="grid grid-cols-2 md:grid-cols-6 gap-3 bg-white p-4 rounded-2xl border border-brand-100">
              <select className="w-full rounded-xl border px-3 py-2 text-sm" value={op} onChange={e=>setOp(e.target.value)}>
                <option value="todas">Todas</option><option value="venta">Venta</option><option value="arriendo">Arriendo</option>
              </select>
              <select className="w-full rounded-xl border px-3 py-2 text-sm" value={comuna} onChange={e=>setComuna(e.target.value)}>
                {["todas", ...Array.from(new Set(all.map(p=>p.comuna)))].map(c=><option key={c} value={c}>{c}</option>)}
              </select>
              <input className="w-full rounded-xl border px-3 py-2 text-sm" placeholder="Mín $" inputMode="numeric" value={min} onChange={e=>setMin(e.target.value)} />
              <input className="w-full rounded-xl border px-3 py-2 text-sm" placeholder="Máx $" inputMode="numeric" value={max} onChange={e=>setMax(e.target.value)} />
              <select className="w-full rounded-xl border px-3 py-2 text-sm" value={dorms} onChange={e=>setDorms(e.target.value)}>
                <option value="todas">Dormitorios</option>{[0,1,2,3,4,5].map(n=><option key={n} value={n}>{n}</option>)}
              </select>
              <select className="w-full rounded-xl border px-3 py-2 text-sm" value={sort} onChange={e=>setSort(e.target.value)}>
                <option value="recientes">Recientes / Destacados</option>
                <option value="precio_asc">Precio: menor a mayor</option>
                <option value="precio_desc">Precio: mayor a menor</option>
              </select>

              <div className="col-span-2 md:col-span-6">
                <input className="w-full rounded-xl border px-3 py-2 text-sm" placeholder="Buscar por título, comuna, etiqueta…"
                       value={q} onChange={e=>setQ(e.target.value)} />
              </div>
            </div>

            {/* Grid */}
            {!loaded ? (
              <div className="mt-8 text-gray-500">Cargando…</div>
            ) : (
              <div className="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {filtered.map(p=><Card key={p.id} p={p} onOpen={(x)=>{setSel(x); setOpen(true);}} />)}
                {filtered.length===0 && <div className="col-span-full text-center text-gray-500 py-12 border rounded-2xl bg-white">No hay resultados.</div>}
              </div>
            )}
          </section>

          {/* SERVICIOS */}
          <section id="servicios" className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <header className="mb-8">
              <h2 className="text-2xl md:text-3xl font-bold">Servicios para propietarios</h2>
              <p className="text-gray-600 mt-2">Publicación, selección de inquilinos, contratos y seguimiento.</p>
            </header>
            <div className="grid md:grid-cols-3 gap-6">
              {[
                {t:"Publicación y Difusión",d:"Fotografía, descripción y promoción en redes."},
                {t:"Selección de Inquilinos",d:"Pre-evaluación y verificación de respaldo."},
                {t:"Gestión de Contratos",d:"Borradores, firmas, renovación o término."},
              ].map(s=>(
                <div key={s.t} className="rounded-2xl border border-brand-100 bg-white p-6 shadow-sm">
                  <h3 className="font-semibold mb-2">{s.t}</h3><p className="text-sm text-gray-700">{s.d}</p>
                </div>
              ))}
            </div>
          </section>

          {/* CONTACTO */}
          <section id="contacto" className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <header className="mb-8">
              <h2 className="text-2xl md:text-3xl font-bold">Contacto</h2>
              <p className="text-gray-600 mt-2">Cuéntanos tu necesidad o publica tu propiedad.</p>
            </header>
            <div className="grid md:grid-cols-2 gap-8">
              <form onSubmit={(e)=>{
                  e.preventDefault();
                  const f=new FormData(e.currentTarget);
                  const nombre=f.get("nombre"), tel=f.get("telefono"), msg=f.get("mensaje");
                  window.open(`https://wa.me/${CONTACT.whatsappMain.replace(/[^\\d]/g,"")}?text=${encodeURIComponent(`Hola, soy ${nombre}. Tel: ${tel}. ${msg}`)}`,"_blank");
                  e.currentTarget.reset();
                }} className="bg-white rounded-2xl border border-brand-100 p-6 space-y-4 shadow-sm">
                <div className="grid sm:grid-cols-2 gap-4">
                  <div><label className="text-sm">Nombre</label><input name="nombre" required className="w-full rounded-xl border px-3 py-2 text-sm" placeholder="Tu nombre"/></div>
                  <div><label className="text-sm">Teléfono</label><input name="telefono" required className="w-full rounded-xl border px-3 py-2 text-sm" placeholder="+56 9 ..."/></div>
                </div>
                <div>
                  <label className="text-sm">Mensaje</label>
                  <textarea name="mensaje" required className="w-full rounded-xl border px-3 py-2 text-sm min-h-[120px]" placeholder="Quiero publicar mi propiedad / consultar disponibilidad"></textarea>
                </div>
                <div className="flex gap-3">
                  <button className="rounded-xl bg-brand-600 text-white px-4 py-2 text-sm hover:bg-brand-700" type="submit">Enviar por WhatsApp</button>
                  <a className="rounded-xl border border-brand-300 text-brand-800 px-4 py-2 text-sm hover:bg-brand-50"
                     href={`mailto:${CONTACT.email}?subject=${encodeURIComponent("Consulta desde el sitio web")}`}>Enviar por Email</a>
                </div>
              </form>
              <div className="space-y-4">
                <div className="rounded-2xl border border-brand-100 bg-white p-6 shadow-sm">
                  <h3 className="font-semibold mb-2">Datos de contacto</h3>
                  <p className="text-sm">Email: <a className="underline" href={`mailto:${CONTACT.email}`}>{CONTACT.email}</a></p>
                  <p className="text-sm">WhatsApp principal: {CONTACT.whatsappMain}</p>
                  <p className="text-sm">WhatsApp alternativo: {CONTACT.whatsappAlt}</p>
                  <p className="text-sm">Facebook: <a className="underline" href={CONTACT.fb} target="_blank" rel="noreferrer">AYM Propiedades</a></p>
                  <p className="text-sm">Instagram: <a className="underline" href={CONTACT.ig} target="_blank" rel="noreferrer">@alarconymatus.propiedades</a></p>
                </div>
              </div>
            </div>
          </section>

          {/* FOOTER */}
          <footer className="border-t">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-gray-600 flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
              <div className="flex items-center gap-3">
                <img src="assets/aym-logo.png" alt="AYM" className="h-6 w-auto" />
                <p>© <span id="y">{new Date().getFullYear()}</span> AYM Propiedades. Todos los derechos reservados.</p>
              </div>
              <div className="flex gap-4">
                <a href="#home" className="hover:text-brand-700">Inicio</a>
                <a href="#listados" className="hover:text-brand-700">Propiedades</a>
                <a href="#contacto" className="hover:text-brand-700">Contacto</a>
              </div>
            </div>
          </footer>

          {open && <Drawer open={open} onClose={()=>setOpen(false)} p={sel} />}
          <Drawer open={open} onClose={()=>setOpen(false)} p={sel} />
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
  </script>
</body>
</html>

</html>
